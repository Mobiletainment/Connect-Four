<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<title>Connect Four (German Documentation)</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
h1
	{mso-style-link:"Überschrift 1 Zchn";
	margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#365F91;}
h2
	{mso-style-link:"Überschrift 2 Zchn";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	font-style:italic;}
h3
	{mso-style-link:"Überschrift 3 Zchn";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Cambria","serif";}
h4
	{mso-style-link:"Überschrift 4 Zchn";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:11.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:22.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Kopfzeile Zchn";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Fußzeile Zchn";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Titel Zchn";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-align:center;
	line-height:115%;
	font-size:16.0pt;
	font-family:"Cambria","serif";
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:#954F72;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Sprechblasentext Zchn";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.berschrift1Zchn
	{mso-style-name:"Überschrift 1 Zchn";
	mso-style-link:"Überschrift 1";
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.berschrift2Zchn
	{mso-style-name:"Überschrift 2 Zchn";
	mso-style-link:"Überschrift 2";
	font-family:"Cambria","serif";
	font-weight:bold;
	font-style:italic;}
span.KopfzeileZchn
	{mso-style-name:"Kopfzeile Zchn";
	mso-style-link:Kopfzeile;}
span.FuzeileZchn
	{mso-style-name:"Fußzeile Zchn";
	mso-style-link:Fußzeile;}
span.berschrift3Zchn
	{mso-style-name:"Überschrift 3 Zchn";
	mso-style-link:"Überschrift 3";
	font-family:"Cambria","serif";
	font-weight:bold;}
span.berschrift4Zchn
	{mso-style-name:"Überschrift 4 Zchn";
	mso-style-link:"Überschrift 4";
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
span.TitelZchn
	{mso-style-name:"Titel Zchn";
	mso-style-link:Titel;
	font-family:"Cambria","serif";
	font-weight:bold;}
span.SprechblasentextZchn
	{mso-style-name:"Sprechblasentext Zchn";
	mso-style-link:Sprechblasentext;
	font-family:"Tahoma","sans-serif";}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:70.85pt 70.85pt 2.0cm 70.85pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=DE-AT link=blue vlink="#954F72">

<div class=WordSection1>

<p class=MsoTitle><a name="_Toc341647357"></a><a name="_Toc341647343"><span
lang=DE>4 Gewinnt by <a href="http://pertiller.me">David Pertiller</a></span></a></p>

<h1><a name="_Toc341647358"></a><a name="_Toc341647344"><span lang=DE>Zweck:</span></a></h1>

<p class=MsoNormal><span lang=DE>In dieser Übung wurde das Thema Suche und
Exploration behandelt. Dafür wurde das Spiel <a
href="http://de.wikipedia.org/wiki/4_gewinnt">4 Gewinnt</a> programmiert, indem
der Spieler gegen einen Computer antreten muss. Für die KI wurde anfangs der
Minimax Algorithmus implementiert und dieser anschließend mit der Alpha Beta
Suche optimiert. </span></p>

<h2><a name="_Toc341647359"></a><a name="_Toc341647345"><span lang=DE>Minimax:</span></a></h2>

<p class=MsoNormal><span lang=DE>Beim Minimax Algorithmus rechnet die KI alle
Zug-Möglichkeiten (sowohl des Gegners als auch der eigenen) voraus und
betrachtet, welche Züge zu einem Gewinn der KI und welche Züge zu einem Gewinn
des Gegners führen. Sobald alle Möglichkeiten ausgerechnet sind, entscheidet
sich die KI für jenen Zug, der die KI am vielversprechendsten zum Ziel führen
wird. Das Problem dieses Algorithmus ist jedoch, dass nicht alle Möglichkeiten
in vertretbarer Zeit berechnet werden können. Zu diesem Zweck wurde ein
Horizont eingeführt, welche die Suchtiefe (Rekursionstiefe) begrenzt. Bei einem
Horizont von 10 Teilzügen (jeder Spieler macht 5 Züge) treten jedoch bereits
eine unangenehme Verzögerung durch den Rechenaufwand auf, wodurch der Horizont
auf 8 Teilzüge begrenzt wurde. Neben der gesteigerten Performance hat die
Beschränkung des Horizontes jedoch den wesentlichen Nachteil, dass die KI das
Spiel nicht mehr komplett durchrechnet und die Zugqualität stark dadurch
leidet.</span></p>

<h2><a name="_Toc341647360"></a><a name="_Toc341647346"><span lang=DE>Alpha
Beta Suche:</span></a></h2>

<p class=MsoNormal><span lang=DE>Beim Minimax Algorithmus werden sehr viele
Zweige betrachtet, die ohnehin nicht zu einem vielversprechenden Gewinn führen
würden. Dazu wurde der Minimax Algorithmus um die Alpha Beta Suche erweitert,
bei welchem Züge, die ein gleich großes oder weniger großes Ergebnis bringen
würden, abgeschnitten und nicht weiter berechnet werden. Durch die dadurch
ersparten Berechnungen war es möglich, den Horizont auf 42, was der
vollständigen Füllung des Spielbrettes entspricht, zu setzen. Dadurch ist es
möglich, den vielversprechendsten Zug zu berechnen, ohne dass es zu einer
Spielverzögerung kommt.</span></p>

<h1><a name="_Toc341647361"></a><a name="_Toc341647347"><span lang=DE>Screenshot:</span></a></h1>

<p class=MsoNormal><img border=0 width=440 height=406 id="Screenshot"
src="Screenshot.jpg"></p>

<h1><a name="_Toc341647362"></a><a name="_Toc341647348"><span lang=DE>Steuerung:</span></a></h1>

<p class=MsoNormal><span lang=DE>Zu Beginn wird mittels den Tasten 1 oder 2
ausgewählt, welcher Spieler beginnt.</span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><b><span lang=DE>Taste 1</span></b><span lang=DE> =
     Spieler beginnt</span></li>
 <li class=MsoNormal><b><span lang=DE>Taste 2</span></b><span lang=DE> =
     Computer beginnt</span></li>
</ul>

<p class=MsoNormal><span lang=DE>In weiterer Folge kann der Spieler seine
Steine durch drücken der Tasten 1 bis 7 in die jeweilige gekennzeichnete Spalte
werfen.</span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><b><span lang=DE>Taste 1, Taste 2, .... Taste 7 </span></b><span
     lang=DE>= Stein in die entsprechende Spalte einwerfen</span></li>
</ul>

<p class=MsoNormal><span lang=DE>Während des Spiels kann mit den Pfeiltasten
Rauf und Runter der Horizont der KI eingestellt werden. Der einstellbare
Bereich liegt zwischen [0..42].</span></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal><b><span lang=DE>Pfeiltaste rauf:</span></b><span lang=DE>
     Horizont erhöhen (maximaler Horizont: 42)</span></li>
 <li class=MsoNormal><b><span lang=DE>Pfeiltaste runter:</span></b><span
     lang=DE> Horizont reduzieren (minimaler Horizont: 0) </span></li>
</ul>

<h1><a name="_Toc341647363"></a><a name="_Toc341647349"><span lang=DE>Abhängigkeitendiagramm:</span></a></h1>

<h2><span lang=DE style='font-size:11.0pt;line-height:115%;font-family:"Calibri","sans-serif";
font-weight:normal;font-style:normal'>Es existieren insgesamt 5 Klassen.
Ausgangspunkt ist die Klasse Program, welche das Spiel startet und ein Game
Objekt instanziiert. In diesem wird der Game Loop ausgeführt und abwechselnd
der Zug des Spielers oder des Computers erwartet. Die Datenerhaltung übernimmt
die Klasse Board, welche die Daten über das Singleton-Pattern zugänglich macht.</span></h2>

<h2><span lang=DE><img border=0 width=756 height=406
src="Component-Diagram.jpg"></span></h2>

<h1><a name="_Toc341647365"></a><a name="_Toc341647351"><span lang=DE>Sieg
Ermittlung:</span></a></h1>

<p class=MsoNormal><span lang=DE>Die Sieg-Bedingung wird immer nur dann
geprüft, nachdem ein Spieler/KI einen Zug getätigt hat. Dabei wird ausgehend
vom eingeworfenen Stein geprüft, ob 3 benachbarte Steine der gleichen Farbe
existieren. </span></p>

<p class=MsoNormal><span lang=DE>Da dies sowohl Horizontal, Vertikal als auch
Diagonal (2x) sein kann, werden diese Möglichkeiten sequenziell durchgegangen.
Sobald 3 benachbarte Steine der gleichen Farbe existieren, sind insgesamt 4
Steine miteinander verbunden. Ist dies der Fall, wird true zurückgegeben,
ansonsten false. </span>Der Clou bei dieser Prüfung ist, dass<b><span lang=DE>
in jede Richtung nur maximal 3 Überprüfungen nötig </span></b><span lang=DE>sind!</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><b><span lang=DE>Anzahl der <u>maximal</u> nötigen Checks = 12 </span></b></p>

<ul style='margin-top:0cm' type=disc>
 <li class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
     normal'><b><span lang=DE>Max. 3 checks horizontal</span></b></li>
 <li class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
     normal'><b><span lang=DE>Max. 3 checks vertikal</span></b></li>
 <li class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
     normal'><b><span lang=DE>Max. 3 checks diagonal von links unten nach
     rechts oben</span></b></li>
 <li class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
     normal'><b><span lang=DE>Max. 3 checks diagonal von rechts unten nach
     links oben </span></b></li>
</ul>

<h2><a name="_Toc341647366"></a><a name="_Toc341647352"><span lang=DE>Vertikal:</span></a></h2>

<p class=MsoNormal><span lang=DE>Da der eingeworfene Stein bereits an oberster
Position im Feld liegt, müssen maximal die 3 nach unten angrenzenden Steine
geprüft werden. Sollte der nächstkommende Stein nicht von der selben Farbe
sein, wird die Prüfung gleich abgebrochen um unnötige Überprüfungen zu sparen</span></p>

<h2><a name="_Toc341647367"></a><a name="_Toc341647353"><span lang=DE>Horizontal:</span></a></h2>

<p class=MsoNormal><span lang=DE>Es werden maximal 3 Steine nach links und „3
minus Anzahl der zusammenhängenden Steine auf der linken Seite“ nach rechts
geprüft. Insgesamt also wiederum maximal 3 Vergleiche.</span></p>

<p class=MsoNormal><span lang=DE>Falls z.B. links 3 zusammenhängende Steine
gefunden werden, wird erst gar nicht nach rechts geprüft. Ist der linke Nachbar
vom aktuellen Stein kein eigener, wird gleich mit der Prüfung der rechten Seite
fortgefahren etc.</span></p>

<h2><a name="_Toc341647368"></a><a name="_Toc341647354"><span lang=DE>Diagonale
1:</span></a></h2>

<p class=MsoNormal><span lang=DE>Hier wird ausgehend vom eingeworfenen Stein
max. 3 Steine nach links unten und 3-connected Steine nach rechts oben gesucht.</span></p>

<h2><a name="_Toc341647369"></a><a name="_Toc341647355"><span lang=DE>Diagonale
2:</span></a></h2>

<p class=MsoNormal><span lang=DE>Hier wird asugehend vom eingeworfenen Stein
max. 3 Steine nach rechts unten und 3-connected Steine nach rechts oben gesucht</span></p>

<h2><a name="_Toc341647370"></a><a name="_Toc341647356"><span lang=EN-US>Heuristik
(EvaluateWorth):</span></a></h2>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;
line-height:normal;text-autospace:none'><span lang=EN-US
style='font-size:8.5pt;font-family:Consolas;color:blue;background:white'>int</span><span
lang=EN-US style='font-size:8.5pt;font-family:Consolas;color:black;background:
white'> EvaluateWorth(</span><span lang=EN-US style='font-size:8.5pt;
font-family:Consolas;color:blue;background:white'>int</span><span lang=EN-US
style='font-size:8.5pt;font-family:Consolas;color:black;background:white'> </span><span
lang=EN-US style='font-size:8.5pt;font-family:Consolas;color:gray;background:
white'>row</span><span lang=EN-US style='font-size:8.5pt;font-family:Consolas;
color:black;background:white'>, </span><span lang=EN-US style='font-size:8.5pt;
font-family:Consolas;color:blue;background:white'>int</span><span lang=EN-US
style='font-size:8.5pt;font-family:Consolas;color:black;background:white'> </span><span
lang=EN-US style='font-size:8.5pt;font-family:Consolas;color:gray;background:
white'>column</span><span lang=EN-US style='font-size:8.5pt;font-family:Consolas;
color:black;background:white'>, </span><span lang=EN-US style='font-size:8.5pt;
font-family:Consolas;color:blue;background:white'>char</span><span lang=EN-US
style='font-size:8.5pt;font-family:Consolas;color:black;background:white'> </span><span
lang=EN-US style='font-size:8.5pt;font-family:Consolas;color:gray;background:
white'>player</span><span lang=EN-US style='font-size:8.5pt;font-family:Consolas;
color:black;background:white'>, </span><span lang=EN-US style='font-size:8.5pt;
font-family:Consolas;color:#2B91AF;background:white'>vector</span><span
lang=EN-US style='font-size:8.5pt;font-family:Consolas;color:black;background:
white'>&lt;</span><span lang=EN-US style='font-size:8.5pt;font-family:Consolas;
color:#2B91AF;background:white'>vector</span><span lang=EN-US style='font-size:
8.5pt;font-family:Consolas;color:black;background:white'>&lt;</span><span
lang=EN-US style='font-size:8.5pt;font-family:Consolas;color:blue;background:
white'>char</span><span lang=EN-US style='font-size:8.5pt;font-family:Consolas;
color:black;background:white'>&gt;&gt; &amp;</span><span lang=EN-US
style='font-size:8.5pt;font-family:Consolas;color:gray;background:white'>field</span><span
lang=EN-US style='font-size:8.5pt;font-family:Consolas;color:black;background:
white'>, </span><span lang=EN-US style='font-size:8.5pt;font-family:Consolas;
color:blue;background:white'>int</span><span lang=EN-US style='font-size:8.5pt;
font-family:Consolas;color:black;background:white'> </span><span lang=EN-US
style='font-size:8.5pt;font-family:Consolas;color:gray;background:white'>multiply</span><span
lang=EN-US style='font-size:8.5pt;font-family:Consolas;color:black;background:
white'>)</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=DE>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=DE>Die Evaluierung des Wertes eines
Zuges baut auf die der Sieg-Ermittlung auf. Anstatt wie bei der Sieg-Ermittlung
wird hier jedoch nicht abgebrochen, sobald 3 gleiche benachbarte Steine erkannt
werden, sondern alle benachbarten Steine aufsummiert (+1 Punkt für
zusammenhängenden Nachbar). Sobald eine Siegbedingung erreicht wurde (kann
mehrmals vorkommen, da horizontal, vertikal etc.) gibt es einen Bonus von 20
Punkten. Weiters gibt es für in der mitte platzierte Steine in der ersten Reihe
einen Bonus von 2 Punkten, für die beiden Felder links und rechts der Mitte 1
Punkt extra.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=DE>Damit möglichst frühzeitige Siege
höher gewertet werden, wird </span><span style='font-size:8.5pt;font-family:
Consolas;color:blue;background:white'>int</span><span style='font-size:8.5pt;
font-family:Consolas;color:black;background:white'> </span><span
style='font-size:8.5pt;font-family:Consolas;color:gray;background:white'>multiply</span>
<span lang=DE>übergeben. Dieser ist umso höher, je weniger Runden gespielt
wurden und ergibt sich aus der Subtraktion der maximal möglichen Züge mit der
aktuellen Runde.Am Ende der Heurstik-Funktion wird der brechnete Wert daher
zusätzlich noch mit dem Multiply-Wert multipliziert.</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=DE>&nbsp;</span></p>

<b><span lang=DE style='font-size:14.0pt;line-height:115%;font-family:"Cambria","serif";
color:#365F91'><br clear=all style='page-break-before:always'>
</span></b>

<h1><span lang=DE>Spiel Ablauf:</span></h1>

<p class=MsoNormal style='text-indent:35.4pt'><span lang=DE><img border=0
width=477 height=438 src="Game-Loop.png"> </span></p>

<p class=MsoNormal><span lang=DE>&nbsp;</span></p>

<p class=MsoNormal><span lang=DE>„Calculate Turn“ im Detail:</span></p>

<p class=MsoNormal><span lang=DE>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=DE><img border=0 width=638 height=508
src="Alpha-Beta-Search.png"></span></p>

</div>

</body>

</html>
